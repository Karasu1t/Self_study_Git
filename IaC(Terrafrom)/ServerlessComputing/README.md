####Terraformを使用したサーバレスコンピューティング構成のIaC化

【概要】
Terraformを使用して、EC2などを使用せずLambda(Python)のみを使用した  
WebアプリケーションっぽいものをIaCで構築する。  

【目的】  
1.Lambdaの学習  
2.Lambdaを学ぶ過程で、Pythonの勉強  
3.サーバレスによるメリットとデメリットの体現  

【参考にしたもの】  
・AWS Lambda実践ガイド 第2版  
  ※本書では、AWSコンソールまたは、Cloud9を使用したSAMでの構築について記述されているので  
  本誌の構成などを元にtfファイルを作成(Cloud9は新規利用者は利用できないので参考にすべきではないかと)  
  また、静的Webホスティング用のhtmlファイルは、JavaScriptであるため現時点での私では作成できず  
  本誌に記載のコードを丸パクリしていることから、そのまま商用目的の流用はNGなので注意  
  
  https://book.impress.co.jp/books/1121101032  

【構成図】  

![サーバレスコンピューティング構成図](https://github.com/user-attachments/assets/86e1a5af-25d9-4c7e-b2f8-b3a02f20aa42)

【通信の流れ】  

①ローカル用端末から静的WebホスティングのS3バケットのオブジェクトのURLを  
　ブラウザ上でJavaScriptのhtml画面を表示させる。

②[ユーザ名],[メールアドレス]を入力し、送信ボタンをクリックすると、  
　その情報をDynamoDBに格納する。  

③
DynamoDBに格納された情報をLambda関数で呼び出し、入力した  
　メールアドレスに、署名付きURLを含んだメッセージを送信

④メールから、URLにジャンプすると、署名付きURL上に格納された特定のオブジェクト(画像)を表示

【利用にあたって】  
１．学習時の環境は以下のとおりです  
　学習時の設定が今後もそのまま流用できるとは限らないので注意  
　・OS: Windows10  
　・シェル: GitBash  
　・Terraformバージョン: 1.9.6  

２．apply実行前に、terraform.tfvarsファイル内の  
「project」,「address」の項目は任意の名前を入れてください。  
なお、「address」は先にAmazon SESに認証を済ませておいてください。  

３．apply実行後、「${var.project}-static-site」バケット内に  
html/index.htmlファイル内のVPCエンドポイント名を書き換えた後に手動で  
格納してください。

４．従量課金制なので、確認次第destroyしてください。  
放置による高額請求に関する責任は負いかねます。  
※2,3週間の学習で約0.8USDでした。参考までに  


【所感】  
・VPCやSGなどのNW周りを気にせず構築できるのは非常に楽でよかった  
・IaC化により容易に再構築が出来るので、オンデマンド環境において  
　コストがかさまずに低価格で環境構築が出来ることが良い
・Pythonコードの記述も触れられることが出来、一石二鳥だった  
・Terraformのコードが頻繁に改変されるため、ChatGPTの回答が古いものを提供されることがあり  
　躓いた部分がある  
・複雑な処理や、幾多のサービスとの重たい処理などには向かないのではと感じた  
